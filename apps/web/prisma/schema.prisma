generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Platform support
enum PlatformType {
  GITHUB
  GITLAB
  AZURE_DEVOPS
  BITBUCKET
}

// Rest of the enums and models remain the same until User model

// Core User Model
model User {
  id                  String                   @id @default(cuid())
  email               String                   @unique
  name                String?
  avatarUrl           String?
  githubScope         String?                  // Added this field
  hasPrivateAccess    Boolean                 @default(false)
  lastScopeUpdate     DateTime?
  settings            UserSettings?            @relation("UserToSettings")
  categoryPreferences UserCategoryPreferences? @relation("UserToPreferences")
  authoredPRs         PullRequest[]            @relation("PRAuthor")
  reviewedPRs         PullRequest[]            @relation("PRReviewers")
  reviews             Review[]
  comments            PRComment[]
  resolvedComments    PRComment[]              @relation("CommentResolver")
  teamMemberships     TeamMember[]
  notifications       Notification[]
  queryMetrics        QueryMetric[]
  apiMetrics          APIMetric[]
  cacheMetrics        CacheMetric[]
  auditLogs           AuditLog[]
  rateLimits          RateLimit[]
  assignedPRs         PullRequest[]            @relation("PRAssignees")
  createdAt           DateTime                 @default(now())
  updatedAt           DateTime                 @updatedAt
}

// Rest of your models...
